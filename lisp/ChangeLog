2003-06-03  Daiki Ueno  <ueno@unixuser.org>

	* riece-rdcc.el (riece-rdcc-sentinel): Don't call delete-process
	explicitly.
	* riece-ndcc.el: Don't call delete-process explicitly.
	* riece-server.el (riece-close-server-process): Don't call
	delete-process explicitly unless riece-debug == t.

2003-06-03  Daiki Ueno  <ueno@unixuser.org>

	* riece-inlines.el (scandinavian-downcase): New inline function.
	(scandinavian-equal-ignore-case): Rename from
	string-equal-ignore-case.
	(scandinavian-member-ignore-case): Rename from
	string-list-member-ignore-case.

	* riece-identity.el (riece-identity-equal): Rename from
	riece-identity-equal-no-server; use scandinavian-equal-ignore-case.
	(riece-identity-equal-safe): Rename from riece-identity-equal.
	(riece-identity-member): Rename from riece-identity-member-no-server.
	(riece-identity-member-safe): Rename from riece-identity-member.
	(riece-identity-assoc): Rename from riece-identity-assoc-no-server.
	(riece-identity-assoc-safe): Rename from riece-identity-assoc.

2003-06-03  Daiki Ueno  <ueno@unixuser.org>

	* riece-rdcc.el: Require 'riece-ctcp.
	(riece-rdcc-insinuate): Add "DCC" to
	riece-ctcp-additional-clientinfo.

	* riece-ctcp.el (riece-ctcp-additional-clientinfo): New variable.
	(riece-command-ctcp-clientinfo): New command.
	(riece-ctcp-insinuate): Bind it in riece-dialogue-mode-map.
	(riece-handle-ctcp-clientinfo-request): New handler.
	(riece-handle-ctcp-clientinfo-response): New handler.

	* riece-server.el (riece-open-server): No need to use
	get-buffer-create to reuse process buffer.

2003-06-03  Daiki Ueno  <ueno@unixuser.org>

	* riece-rdcc.el (riece-command-dcc-send): Generate new buffer for
	DCC process.
	(riece-command-dcc-receive): Likewise; don't set buffer-file-name.

	* riece-server.el (riece-server-keyword-map): `:coding-system' ->
	`:coding'.
	(riece-open-server): Follow the change.

	* riece-ctcp.el (riece-command-ctcp-action): New command.
	(riece-ctcp-insinuate): Bind it in riece-dialogue-mode-map.
	(riece-handle-ctcp-action-request): New handler.

	* riece.el (riece-command-mode): Enclose status indicators with
	`{}'; show riece-user-indicator.
	(riece-channel-mode): Likewise.
	(riece-dialogue-mode): Enclose status indicators with `{}'.
	* riece-globals.el (riece-user-indicator): New indicator.
	(riece-freeze-indicator): Default to "-".
	* riece-display.el (riece-update-channel-indicator): Don't update
	modeline.
	(riece-update-status-indicators): Set riece-user-indicator.
	* riece-300.el (riece-handle-324-message): Update channel indicator.

2003-06-02  Daiki Ueno  <ueno@unixuser.org>

	* riece.el (riece-command-mode): Don't set riece-freeze-indicator.
	(riece-dialogue-mode): Call riece-update-status-indicators.
	(riece-channel-mode): Add riece-operator-indicator to
	mode-line-buffer-identification.
	* riece-user.el (riece-make-user): New attribute `operator'.
	(riece-user-operator): New function.
	(riece-user-set-operator): New function.
	(riece-user-toggle-away): New function.
	(riece-user-toggle-operator): New function.
	* riece-misc.el (riece-own-frozen): Revive.
	* riece-message.el (riece-display-message): Reset riece-freeze if
	riece-freeze == 'own && (riece-message-own-p message).
	* riece-globals.el (riece-own-freeze): Abolish; use riece-freeze.
	(riece-operator-indicator): New variable.
	* riece-display.el (riece-update-status-indicators): New function.
	(riece-update-buffer-functions): Add it.
	* riece-commands.el (riece-command-toggle-freeze): Don't call
	riece-freeze.
	(riece-command-toggle-own-freeze): Don't call riece-own-freeze.
	* riece-300.el (riece-handle-302-message): Use
	riece-user-toggle-away instead of riece-user-set-away.
	(riece-handle-301-message): Ditto.
	(riece-handle-305-message): Ditto.
	(riece-handle-306-message): Ditto.
	(riece-handle-352-message): Ditto.

2003-06-02  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* riece-commands.el (riece-command-next-channel): Circularly
	follow the channel list.
	(riece-command-previous-channel): Ditto.

2003-06-02  Daiki Ueno  <ueno@unixuser.org>

	* riece.el (riece-command-mode): Set default value of riece-freeze
	& riece-own-freeze.
	* riece-options.el (riece-away-message): New user option.
	* riece-commands.el (riece-command-toggle-away): Query user away
	message.
	* riece-300.el (riece-handle-301-message): Set user's away status.
	(riece-handle-305-message): Ditto.
	(riece-handle-306-message): Ditto.
	(riece-handle-302-message): Ditto.
	(riece-handle-352-message): Ditto.

2003-06-02  Daiki Ueno  <ueno@unixuser.org>

	* riece-rdcc.el: Require riece-globals, riece-misc, riece-channel,
	and riece-identity.
	(riece-command-dcc-receive): Check the existence of
	set-buffer-multibyte.

2003-06-02  Daiki Ueno  <ueno@unixuser.org>

	* Riece: Version 0.0.3 released.
	* riece-version.el (riece-version-number): Bump up to 0.0.3.

	* riece-ctcp.el (riece-handle-ctcp-request): Catch errors occured
	in hooks.
	(riece-handle-ctcp-response): Ditto.

2003-06-01  Daiki Ueno  <ueno@unixuser.org>

	* riece-user.el (riece-rename-user): Don't modify entry when
	old-name == new-name.

	* riece-display.el (riece-configure-windows): Use window-buffer
	instead of current-buffer.

	* riece-rdcc.el (riece-rdcc-server-address): Default to nil.
	(riece-rdcc-ruby-command): New user option.
	(riece-rdcc-send-program): New user option.
	(riece-rdcc-decode-address-program): New user option.
	(riece-rdcc-substitute-variables): New function.
	(riece-command-dcc-send): Use it.
	(riece-rdcc-decode-address): Use it.

2003-06-01  Daiki Ueno  <ueno@unixuser.org>

	* riece-rdcc.el: New add-on.

	* Makefile.am (EXTRA_DIST): Add riece-rdcc.el

2003-06-01  Daiki Ueno  <ueno@unixuser.org>

	* riece-ndcc.el: New add-on.
	* Makefile.am (EXTRA_DIST): Add riece-ndcc.el

2003-05-31  Daiki Ueno  <ueno@unixuser.org>

	* riece-server.el (riece-open-server): Simplify message.

	* riece-commands.el (riece-command-open-server): Throw an error
	when the server is already opened.

	* riece-filter.el (riece-sentinel): Simplified.

	* riece-display.el (riece-user-list-update-buffer): Check the
	existence of riece-user-list-buffer.
	(riece-channel-list-update-buffer): Check the existence of
	riece-channel-list-buffer.
	(riece-set-window-points): Ditto.

	* riece-commands.el (riece-command-open-server): Simplified.
	(riece-command-toggle-channel-buffer-mode): Set
	riece-save-variables-are-dirty to t.
	(riece-command-toggle-user-list-buffer-mode): Ditto.
	(riece-command-toggle-channel-list-buffer-mode): Ditto.

	* riece-server.el (riece-start-server): Abolish.
	(riece-open-server): Set riece-server-process-alist and
	riece-server-process here.

2003-05-31  Daiki Ueno  <ueno@unixuser.org>

	* riece-filter.el (riece-sentinel): Close process even if
	riece-reconnect-with-password == t.
	(riece-handle-message): Catch errors occured in hooks.

	* riece-server.el (riece-open-server): Reuse server buffer.
	(riece-close-server-process): Delete process even if process is
	not running.

2003-05-31  Daiki Ueno  <ueno@unixuser.org>

	* riece-server.el (riece-open-server): No need to reset
	riece-reconnect-with-password.

	* riece-filter.el (riece-sentinel): Don't call riece when
	riece-reconnect-with-password = t and process !=
	riece-server-process.

	* riece-url.el: Fix usage.

	* riece-inlines.el (string-list-member-ignore-case): Remove docstring.

	* riece-unread.el: New add-on.
	* COMPILE (riece-modules): Add riece-unread.
	* Makefile.am (EXTRA_DIST): Add riece-unread.el

	* riece-300.el (riece-handle-322-message): New handler.
	(riece-handle-323-message): New handler.

2003-05-30  Daiki Ueno  <ueno@unixuser.org>

	* riece-display.el (riece-configure-windows): Select other window
	when minibuffer is active.

	* riece-commands.el (riece-command-list): New command.
	(riece-command-enter-message-as-notice): New command.
	* riece.el (riece-command-mode-map): Bind
	riece-command-enter-message-as-notice and riece-command-list.

	* riece-server.el (riece-close-server): Skip nil when leaving
	channels before closing server.

2003-05-30  Daiki Ueno  <ueno@unixuser.org>

	* Riece: Version 0.0.2 released.
	* riece-version.el (riece-version-number): Bump up to 0.0.2.

	* riece.el (riece-load-and-build-addon-dependencies): Fixed.
	* riece-url.el (riece-url-requires): Don't assert dependency on
	riece-highlight unless it appears in riece-addons.

	* riece-url.el: New add-on.
	* COMPILE (riece-modules): Add riece-url.

	* riece-message.el (riece-message-make-bracket): Abolish.
	* riece-highlight.el (riece-highlight-font-lock-keywords):
	Give up to fontify "-nick-" or "-nick server-".

	* riece-highlight.el (riece-highlight-font-lock-keywords):
	Simplified regexp.

	* riece-ctcp.el (riece-handle-ctcp-request): Don't bind user.
	(riece-handle-ctcp-response): Ditto.

	* riece-highlight.el: Make it an add-on.
	(riece-highlight-insinuate): New function.
	* riece.el: Don't require 'riece-highlight.
	* riece-options.el (riece-addons): Turn on riece-highlight and
	riece-ctcp by default.

	* riece-display.el (riece-configure-windows-predicate): New function.
	(riece-configure-windows-predicate): New user option.
	(riece-redisplay-buffers): Use it.

	* riece-complete.el: Require 'cl for butlast.

	* Makefile.am (elc): Renamed from "compile".

	* riece.el (riece-dialogue-mode-map): Bind
	riece-command-toggle-channel-list-buffer-mode.

	* riece-display.el (riece-configure-windows): Typo fixed.

	* riece-user.el (riece-user-toggle-channel): Use member instead of
	memq.

2003-05-29  Daiki Ueno  <ueno@unixuser.org>

	* riece-ctcp.el (riece-ctcp-insinuate): New function.

	* riece-options.el (riece-addons): New user option.
	(riece-addon-directory): New user option.

	* riece.el (riece-load-and-build-addon-dependencies): New function.
	(riece-insinuate-addons): New function.
	(riece): Call riece-insinuate-addons.

	* riece-misc.el (riece-get-users-on-server): Moved from
	riece-commands.el.

	* riece-ctcp.el: New file.
	* COMPILE (riece-modules): Add riece-ctcp.
	* Makefile.am (EXTRA_DIST): Add riece-ctcp.el

2003-05-29  Daiki Ueno  <ueno@unixuser.org>

	* Riece: Version 0.0.1 released.

	* riece-commands.el (riece-command-names): New command.
	(riece-command-who): New command.

	* riece.el (riece-dialogue-mode-map): Bind riece-command-names and
	riece-command-who.

	* riece-300.el (riece-handle-341-message): New handler.
	(riece-handle-352-message): New handler.

	* riece-commands.el (riece-command-invite): Don't accept channel
	argument; throw an error when user is not on a channel.
	(riece-command-kick): New command.
